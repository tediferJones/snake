function k(u,z,A){const B=document.createElement(u);if(z)Object.keys(z).forEach((j)=>B[j]=z[j]);if(A?.length)B.append(...A.filter((j)=>j!=null));return B}var x;document.addEventListener("keydown",(u)=>{if(console.log(u.key),!x||x.readyState>1)return;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(u.key))x?.send(u.key)});document.body.append(k("button",{textContent:"Join General Lobby",className:"m-4 p-4 border-4 border-black",onclick:()=>{const{host:u,protocol:z}=window.location,A=document.querySelector("#colorPicker").value.slice(1);console.log(A),x=new WebSocket(`${z==="http:"?"ws":"wss"}://${u}?gameCode=general&color=${A}`),x.onmessage=(B)=>{const j=JSON.parse(B.data);console.log(j),document.querySelector("#gameOver").textContent="",document.querySelector("#board")?.remove(),document.body.appendChild(k("div",{id:"board",className:"mx-auto w-min border-4 border-black flex flex-col bg-cyan-500"},[...Array(j.boardSize).keys()].map((q)=>{return k("div",{className:"flex"},[...Array(j.boardSize).keys()].map((v)=>{return k("div",{id:`cell-${q}-${v}`,className:"aspect-square min-h-12 flex justify-center items-center"})}))}))),Object.values(j.players).forEach((q)=>{if(q.state==="gameover"){if(q.uuid===j.uuid)document.querySelector("#gameOver").textContent="Game Over";return}const{pos:v,color:D}=q;console.log(v.row,v.col,D),document.querySelector(`#cell-${v.row}-${v.col}`).style.backgroundColor=`#${D}`}),j.foodLocations.forEach((q)=>{document.querySelector(`#cell-${q.row}-${q.col}`).textContent="*"})}}}),k("input",{id:"colorPicker",type:"color"}),k("button",{textContent:"Disconnect",className:"m-4 p-4 border-4 border-black",onclick:()=>x?.close()}),k("span",{id:"gameOver"}));
