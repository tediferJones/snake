function k(u,x,z){const A=document.createElement(u);if(x)Object.keys(x).forEach((j)=>A[j]=x[j]);if(z?.length)A.append(...z.filter((j)=>j!=null));return A}var v;document.addEventListener("keydown",(u)=>{if(console.log(u.key),!v||v.readyState>1)return;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(u.key))v?.send(u.key)});document.body.append(k("button",{textContent:"Join General Lobby",className:"m-4 p-4 border-4 border-black",onclick:()=>{const{host:u,protocol:x}=window.location,z=document.querySelector("#colorPicker").value.slice(1);console.log(z),v=new WebSocket(`${x==="http:"?"ws":"wss"}://${u}?gameCode=general&color=${z}`),v.onmessage=(A)=>{const j=JSON.parse(A.data);console.log(j),document.querySelector("#gameOver").textContent="",document.querySelector("#board")?.remove(),document.body.appendChild(k("div",{id:"board",className:"mx-auto w-min border-4 border-black flex flex-col bg-gray-200"},[...Array(j.boardSize).keys()].map((q)=>{return k("div",{className:"flex"},[...Array(j.boardSize).keys()].map((B)=>{return k("div",{id:`cell-${q}-${B}`,className:"aspect-square min-h-12 flex justify-center items-center border-2 border-gray-300"})}))}))),Object.values(j.players).forEach((q)=>{if(q.state==="gameover"){if(q.uuid===j.uuid)document.querySelector("#gameOver").textContent="Game Over";return}const{pos:B,color:E}=q;B.forEach((D)=>{document.querySelector(`#cell-${D.row}-${D.col}`).style.backgroundColor=`#${E}`})}),j.foodLocations.forEach((q)=>{document.querySelector(`#cell-${q.row}-${q.col}`).textContent="*"})}}}),k("input",{id:"colorPicker",type:"color"}),k("button",{textContent:"Disconnect",className:"m-4 p-4 border-4 border-black",onclick:()=>v?.close()}),k("span",{id:"gameOver"}));
